<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body onload="pageload();">
    
    <h1>Git/Github를 이용한 Javascript CRUD Project</h1>
    <div>
        <input type="text" id="read_data">
        <input type="button" value="검색" onclick="read()">
    </div>
    
    
    <div>
        <select id="dataList" style=width:200px multiple size=20></select>
        <button type="button" onclick="delete_data()">삭제</button>
    </div>
            
            
    <div>
        <input type="text" id="create_data">
        <input type="button" value="생성" onclick="create()">
    </div>
            
            
    <div>
        <input type="text" id="update_data">
        <input type="button" value="수정" onclick="update()">
    </div>
    
    <script>
    var sessionStorage = window.sessionStorage;                     //세션스토리지 호출
    var dataList = document.getElementById("dataList");             //select태그 id를 변수에 할당
    var create_data = document.getElementById("create_data");       //추가 기능 id를 변수에 할당
    var select = document.getElementById("dataList");               //select태그의 options을 담을 객체
    var update_data = document.getElementById("update_data");       //수정 기능 id를 변수에 할당
    var read_data = document.getElementById("read_data");           //검색 기능 id를 변수에 할당   
    
    function pageload() {   
        dataList.innerHTML = ""; 
        for (var i = 0; i <= sessionStorage.length - 1; i++) {     
            var key = sessionStorage.key(i);                            
            dataList.options[dataList.options.length] = new Option(key, key);
        }
    }

    function create() {    
        sessionStorage.setItem(create_data.value, 0);               
        pageload();
    }

    function delete_data() {        
        var option_value = select.options[select.selectedIndex].value;      
        sessionStorage.removeItem(option_value);                    
        pageload();         
    }

    function update() {     
        if (update_data.value != "") {                              
            delete_data();      
            sessionStorage.setItem(update_data.value, 0);           
            pageload();     
        }
    }
    </script>
</body>
</html>